inputs_def:
  - handle: source_epub
    description: "%path-to-the-source-epub-file-to-translate%"
    json_schema:
      type: string
      ui:widget: file
      ui:options:
        filters:
          - name: EPUB
            extensions:
              - epub
    nullable: false

  - handle: target_language
    description: "%target-language-for-translation%"
    json_schema:
      type: string
      enum:
        - English
        - Chinese
        - Spanish
        - French
        - German
        - Japanese
        - Korean
        - Portuguese
        - Russian
        - Italian
        - Arabic
        - Hindi
    value: Chinese
    nullable: false

  - handle: output_path
    description: "%path-where-the-translated-epub-will-be-saved-defaults-to-session%"
    json_schema:
      type: string
      ui:widget: save
      ui:options:
        filters:
          - name: EPUB
            extensions:
              - epub
        excludeAll: true
    value:
    nullable: true

  - handle: llm
    description: "%llm-model-configuration-for-translation%"
    json_schema:
      ui:widget: llm::model
      ui:options:
        title: Model
    value:
      model: oomol-chat
      temperature: 0.5
      top_p: 1
      max_tokens: 128000
    nullable: false

  - group: Advanced Options
    collapsed: true

  - handle: custom_prompt
    description: "%custom-translation-instructions-optional%"
    json_schema:
      type: string
      ui:widget: text
    nullable: true

  - handle: max_group_tokens
    description: "%maximum-tokens-per-translation-batch%"
    json_schema:
      type: integer
      minimum: 100
      maximum: 4000
    value: 1200
    nullable: false

  - handle: max_retries
    description: "%maximum-number-of-retries-for-failed-translations%"
    json_schema:
      type: integer
      minimum: 1
      maximum: 10
    value: 5
    nullable: false

outputs_def:
  - handle: translated_file
    description: "%path-to-the-translated-epub-file%"
    json_schema:
      type: string
      ui:widget: file

  - handle: success
    description: "%whether-the-translation-was-successful%"
    json_schema:
      type: boolean

executor:
  name: python
  options:
    entry: __init__.py
    spawn: false

title: "%epub-translator%"
icon: ":carbon:translate:"
description: "%translate-epub-files-to-different-languages-using-llm-preserving%"
